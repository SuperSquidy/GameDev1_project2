<!doctype html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>The Food is Alive</title>
        <script src="phaser.js"></script>
    </head>
    <body>

    <script type="text/javascript">

    window.onload = function() {

        var game = new Phaser.Game(1136, 640, Phaser.AUTO, '', { preload: preload, create: create, update: update });
        var start_swipe_point = new Phaser.Point(0,0);
        var isDragging = false;
        var curGroup;
        var foodGroup;
        var i;
        var counter = 4;
        start_swipe = function (pointer) {
            isDragging = true;
        };

        end_swipe = function (pointer) {
            isDragging = false;

            //TODO: IF start_swipe_point is between sprite.width - (sprite.width * .6) and sprite.width - (sprite.width * .4)
        };
        check_collision = function () {
            for(i = 0; i < foodGroup.length; i++){
                if(foodGroup[i].contains(curGroup[0].x, curGroup[0].y)){
                    deltaY = curGroup[1].y - curGroup[0].y;
                    deltaX = curGroup[1].x - curGroup[0].x;
                    angle = Math.atan2(deltaY, deltaX) * 180 / 3.14;
                    //Check if the angle lines up with food direction
                    //Also check to make sure cut is in the center of the food?
                }
            }
        }

        function preload () {


        }

        function create () {

            curGroup = [];
            for(i = 0; i < 3; i++)
            {
                curGroup.push(new Phaser.Point(0,0));
            }

        }
        function update() {
            game.input.onDown.add(start_swipe, this);
            game.input.onUp.add(end_swipe, this);
            if(isDragging && counter < 1)
            {
                curGroup[2] = curGroup[1];
                curGroup[1] = curGroup[0];
                curGroup[0] = new Phaser.Point(game.input.x, game.input.y);
                console.log(curGroup[0]);
                counter = 4;
            }
            else{
                counter--;
            }

        }

    };

    </script>

    </body>
</html>